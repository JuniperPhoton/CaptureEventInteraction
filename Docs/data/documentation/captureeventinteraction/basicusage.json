{"metadata":{"roleHeading":"Article","title":"Essential Usage","role":"article","modules":[{"name":"CaptureEventInteraction"}]},"sections":[],"kind":"article","hierarchy":{"paths":[["doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction"]]},"primaryContentSections":[{"content":[{"level":2,"text":"For iOS 18 or above","type":"heading","anchor":"For-iOS-18-or-above"},{"inlineContent":[{"identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction","type":"reference","isActive":true},{"text":" is made for the iOS prior to iOS 18.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"On iOS 18, Apple has provided a new SwiftUI API to interact with the physical buttons:"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Click here to view the "},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onCameraCaptureEvent(isEnabled:primaryAction:secondaryAction:)","type":"reference"},{"type":"text","text":" API for iOS 18."}],"type":"paragraph"},{"anchor":"Prior-to-iOS-18","text":"Prior to iOS 18","level":2,"type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Starting iOS 17.2, Apple introduces a new API ","type":"text"},{"code":"AVCaptureEventInteraction","type":"codeVoice"},{"text":" to help you interact with the Volume Up and Volume Down buttons in the camera app.","type":"text"}]},{"inlineContent":[{"type":"text","text":"And there is a library named "},{"type":"codeVoice","code":"VolumeButtonHandler"},{"type":"text","text":", which observes the "},{"type":"codeVoice","code":"AVAudioSession"},{"type":"text","text":" to detect the volume button events."},{"type":"text","text":" "},{"type":"text","text":"This approach is not recommended by Apple, as it may cause some other unexpected behaivor like the device’s volume may be altered to non-silent mode."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This library encapulates the "},{"type":"codeVoice","code":"AVCaptureEventInteraction"},{"text":" and ","type":"text"},{"code":"VolumeButtonHandler","type":"codeVoice"},{"type":"text","text":" and provides a unique way to interact with the volume buttons."}],"type":"paragraph"},{"text":"Construct CaptureEventInteraction","anchor":"Construct-CaptureEventInteraction","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"First import and construct the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction"},{"type":"text","text":" instance."}]},{"syntax":"swift","code":["import CaptureEventInteraction"],"type":"codeListing"},{"syntax":"swift","code":["private let captureEventInteraction = CaptureEventInteraction()"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"Please make sure there is a strong reference to this instance.","type":"text"}]},{"anchor":"Set-the-action-for-Volume-Up-and-Down-buttons","level":3,"type":"heading","text":"Set the action for Volume Up and Down buttons"},{"code":["captureEventInteraction.onVolumeUpTriggered = { [weak self] in","    guard let self = self else { return }","    \/\/ do actions","}","","captureEventInteraction.onVolumeDownTriggered = { [weak self] in","    guard let self = self else { return }","    \/\/ do actions","}"],"syntax":"swift","type":"codeListing"},{"type":"heading","level":3,"anchor":"Register-this-to-a-UIView","text":"Register this to a UIView"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can call the "},{"identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction\/register(to:)","type":"reference","isActive":true},{"type":"text","text":" method to register the interaction to a view."}]},{"code":["interaction.register(to: uiView)"],"type":"codeListing","syntax":null},{"type":"paragraph","inlineContent":[{"type":"text","text":"Later if necessary you can unregister the interaction from the view."}]},{"type":"codeListing","code":["interaction.unregister(from: uiView)"],"syntax":null},{"inlineContent":[{"text":"And that’s it.","type":"text"}],"type":"paragraph"},{"name":"Note","style":"note","content":[{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"type":"reference","identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction\/onVolumeUpTriggered","isActive":true},{"type":"text","text":" and "},{"type":"reference","identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction\/onVolumeDownTriggered","isActive":true},{"text":" ","type":"text"},{"type":"text","text":"will only be triggered if the camera session is running."}]}],"type":"aside"}],"kind":"content"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"identifier":{"url":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/BasicUsage","interfaceLanguage":"swift"},"abstract":[{"text":"How to use ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction"},{"type":"text","text":" to provide functionality to your app."}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/captureeventinteraction\/basicusage"]}],"references":{"doc://captureeventinteraction.CaptureEventInteraction/documentation/CaptureEventInteraction/CaptureEventInteraction":{"title":"CaptureEventInteraction","abstract":[{"type":"text","text":"A class to manage the press events of the Volume Up and Volume Down buttons."}],"url":"\/documentation\/captureeventinteraction\/captureeventinteraction","role":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CaptureEventInteraction","kind":"identifier"}],"navigatorTitle":[{"text":"CaptureEventInteraction","kind":"identifier"}],"identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction","kind":"symbol","type":"topic"},"swift-icon.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/captureeventinteraction.CaptureEventInteraction\/swift-icon.png"}],"identifier":"swift-icon.png","type":"image","alt":null},"doc://captureeventinteraction.CaptureEventInteraction/documentation/CaptureEventInteraction/CaptureEventInteraction/register(to:)":{"abstract":[{"type":"text","text":"Register the interaction to a specific view which should be in the responder chain."}],"type":"topic","identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction\/register(to:)","role":"symbol","kind":"symbol","url":"\/documentation\/captureeventinteraction\/captureeventinteraction\/register(to:)","title":"register(to:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"register"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"to"},{"text":": ","kind":"text"},{"preciseIdentifier":"c:objc(cs)UIView","kind":"typeIdentifier","text":"UIView"},{"kind":"text","text":")"}]},"doc://captureeventinteraction.CaptureEventInteraction/documentation/CaptureEventInteraction":{"kind":"symbol","type":"topic","title":"CaptureEventInteraction","url":"\/documentation\/captureeventinteraction","identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction","images":[{"identifier":"swift-icon.png","type":"icon"}],"role":"collection","abstract":[{"type":"text","text":"This Swift package contains a class CaptureEventInteraction to help you interact with the Volumn Up and Volumn Down buttons in the camera app."}]},"doc://captureeventinteraction.CaptureEventInteraction/documentation/CaptureEventInteraction/CaptureEventInteraction/onVolumeDownTriggered":{"title":"onVolumeDownTriggered","abstract":[],"kind":"symbol","type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"onVolumeDownTriggered"},{"text":": (() -> ","kind":"text"},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"},{"kind":"text","text":")?"}],"identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction\/onVolumeDownTriggered","url":"\/documentation\/captureeventinteraction\/captureeventinteraction\/onvolumedowntriggered"},"doc://captureeventinteraction.CaptureEventInteraction/documentation/CaptureEventInteraction/CaptureEventInteraction/onVolumeUpTriggered":{"kind":"symbol","abstract":[],"fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"onVolumeUpTriggered"},{"text":": (() -> ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"text":")?","kind":"text"}],"type":"topic","title":"onVolumeUpTriggered","url":"\/documentation\/captureeventinteraction\/captureeventinteraction\/onvolumeuptriggered","role":"symbol","identifier":"doc:\/\/captureeventinteraction.CaptureEventInteraction\/documentation\/CaptureEventInteraction\/CaptureEventInteraction\/onVolumeUpTriggered"},"https://developer.apple.com/documentation/SwiftUI/View/onCameraCaptureEvent(isEnabled:primaryAction:secondaryAction:)":{"url":"https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onCameraCaptureEvent(isEnabled:primaryAction:secondaryAction:)","identifier":"https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onCameraCaptureEvent(isEnabled:primaryAction:secondaryAction:)","type":"link","title":"onCameraCaptureEvent(isEnabled:primaryAction:secondaryAction:)","titleInlineContent":[{"type":"text","text":"onCameraCaptureEvent(isEnabled:primaryAction:secondaryAction:)"}]}}}